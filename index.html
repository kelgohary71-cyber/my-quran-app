<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ© - Ø®ØªÙ…Ø© Ø§Ù„Ø³Ù†Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Cairo:wght@900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Cairo', sans-serif; 
            background: linear-gradient(135deg, #d1fae5 0%, #fef3c7 50%, #d1fae5 100%); 
            min-height: 100vh; padding-bottom: 50px;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø­Ø³Ù† */
        .progress-header { 
            background: #065f46; color: #fbbf24; padding: 10px 15px; 
            text-align: center; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); border-bottom: 3px solid #fbbf24;
        }
        .header-main { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 8px; }
        .app-logo { width: 55px; height: 55px; border-radius: 10px; border: 2px solid #fbbf24; object-fit: cover; }
        .progress-info { font-size: 18px; font-weight: 900; line-height: 1.2; }

        .progress-bar-bg { background: #047857; height: 12px; border-radius: 6px; width: 85%; margin: 5px auto; overflow: hidden; border: 1px solid #fbbf24; }
        #progress-fill { background: #fbbf24; height: 100%; width: 0%; transition: width 0.5s; }

        .container { max-width: 800px; margin: 0 auto; padding: 15px; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆØ±Ø¯ ÙˆØ§Ù„Ø¢ÙŠØ§Øª */
        .verse-block { margin-bottom: 30px; }
        .info-tag { text-align: center; font-weight: 900; color: #047857; margin-bottom: 5px; font-size: 16px; background: white; border-radius: 8px; padding: 3px; border: 1px solid #10b981; }
        
        .card-container { 
            background: #ffffff; border: 4px solid #3b82f6; border-radius: 15px; 
            padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .card-header { color: #3b82f6; font-size: 18px; font-weight: 900; margin-bottom: 10px; border-bottom: 2px solid #3b82f6; display: inline-block; }
        .card-text { font-size: 22px; font-weight: 800; color: #374151; line-height: 1.6; text-align: justify; white-space: pre-wrap; }

        /* Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
        .share-btn {
            margin-top: 15px; background: #3b82f6; color: white; border: none; 
            padding: 10px 20px; border-radius: 10px; font-weight: 900; cursor: pointer; width: 100%; font-size: 18px; font-family: 'Cairo';
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ */
        .nav-buttons { display: flex; gap: 15px; margin: 25px 0; }
        .nav-btn { flex: 1; padding: 20px; border: none; border-radius: 15px; font-size: 22px; font-weight: 900; color: white; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .btn-prev { background: #FF6B35; }
        .btn-next { background: #8B5CF6; border-bottom: 4px solid #5b21b6; }

        .dedication { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 4px solid #fbbf24; border-radius: 15px; padding: 20px; text-align: center; color: white; margin-top: 30px; font-size: 20px; font-weight: 900; }
        .footer { background: #047857; padding: 20px; text-align: center; color: white; border-radius: 12px; margin-top: 15px; font-size: 24px; font-weight: 900; }
    </style>
</head>
<body>

    <div class="progress-header">
        <div class="header-main">
            <img src="logo.png" alt="Ù„ÙˆØ¬Ùˆ" class="app-logo" onerror="this.style.display='none'">
            <div class="progress-info" id="day-counter">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
        <div class="progress-bar-bg"><div id="progress-fill"></div></div>
        <div style="font-size: 13px; font-weight: 900;" id="percent-text">0%</div>
    </div>

    <div class="container">
        <div id="loading" style="text-align:center; padding:50px; font-size:22px; font-weight:900;">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ€Ù‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ€Ù°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù...</div>
        <div id="verses-container"></div>

        <div class="nav-buttons">
            <button class="nav-btn btn-prev" onclick="changePage(-1)">Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="nav-btn btn-next" onclick="changePage(1)">Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>

        <div class="dedication">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù†ÙŠ ÙˆØ¹Ù† ÙˆØ§Ù„Ø¯ÙŠØ§ ÙˆØ²ÙˆØ¬ØªÙŠ ÙˆØ£ÙˆÙ„Ø§Ø¯ÙŠ</div>
        <div class="footer">Ø£ / Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ</div>
    </div>

    <script>
        let allItems = [];
        let currentPage = 0;
        const pageSize = 20;

        async function init() {
            try {
                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù quran.json
                const response = await fetch('quran.json');
                if (!response.ok) throw new Error();
                const data = await response.json();
                
                // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø°Ø±ÙŠ Ù‡Ù†Ø§ Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ù„ÙÙƒ (Ø­ÙŠØ« ÙƒÙ„ Ø§Ù„Ù†Øµ ÙÙŠ Ø®Ø§Ù†Ø© text)
                allItems = data.map(item => ({
                    // Ù†Ø£Ø®Ø° Ø§Ù„Ù†Øµ Ù…Ù† Ø®Ø§Ù†Ø© text Ø£Ùˆ aya_text Ø£Ùˆ Ø£ÙŠ Ù…Ø³Ù…Ù‰ Ù…ØªØ§Ø­
                    content: item.text || item.aya_text || "Ù†Øµ ØºÙŠØ± Ù…ØªÙˆÙØ±",
                    info: `Ø³ÙˆØ±Ø© Ø±Ù‚Ù… ${item.number || ''} - Ø¢ÙŠØ© ${item.aya || ''}`
                }));

                currentPage = parseInt(localStorage.getItem('currentWirdPage') || '0');
                render();
                document.getElementById('loading').style.display = 'none';
            } catch (e) { 
                document.getElementById('loading').innerHTML = "<div style='color:red; padding:20px;'>Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù quran.json Ø£Ùˆ Ø£Ù† ØªÙ†Ø³ÙŠÙ‚Ù‡ Ø®Ø§Ø·Ø¦. ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ø¬ÙŠØª Ù‡Ø§Ø¨ Ø¨Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯.</div>"; 
            }
        }

        function render() {
            const container = document.getElementById('verses-container');
            container.innerHTML = '';
            
            const start = currentPage * pageSize;
            const end = start + pageSize;
            const currentSet = allItems.slice(start, end);

            currentSet.forEach(item => {
                const html = `
                    <div class="verse-block">
                        <div class="info-tag">${item.info}</div>
                        <div class="card-container">
                            <div class="card-header">Ø§Ù„Ø¢ÙŠØ© ÙˆØ§Ù„ØªÙØ³ÙŠØ±:</div>
                            <p class="card-text">${item.content}</p>
                            <button class="share-btn" onclick="shareItem('${item.content.replace(/\n/g, " ").substring(0,150)}...', '${item.info}')">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙˆØ±Ø¯ ğŸ”—</button>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });

            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØ§Ù„Ø¹Ø¯Ø§Ø¯
            const totalPages = Math.ceil(allItems.length / pageSize);
            const progress = totalPages > 0 ? ((currentPage / (totalPages - 1)) * 100).toFixed(1) : 0;
            
            document.getElementById('day-counter').innerText = `Ø§Ù„ÙˆØ±Ø¯ ${currentPage + 1} Ù…Ù† ${totalPages}`;
            document.getElementById('progress-fill').style.width = progress + "%";
            document.getElementById('percent-text').innerText = `Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø®ØªÙ…Ø©: ${progress}%`;
            
            window.scrollTo(0,0);
        }

        function shareItem(txt, inf) {
            const shareLink = window.location.href;
            const shareText = `${txt}\n[${inf}]\nØªØ·Ø¨ÙŠÙ‚ Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©\n${shareLink}`;
            if (navigator.share) {
                navigator.share({ title: 'ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…', text: shareText });
            } else {
                alert("Ø§Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙ‡:\n" + shareText);
            }
        }

        function changePage(dir) {
            const newPage = currentPage + dir;
            const totalPages = Math.ceil(allItems.length / pageSize);
            if (newPage >= 0 && newPage < totalPages) {
                currentPage = newPage;
                localStorage.setItem('currentWirdPage', currentPage);
                render();
            }
        }
        init();
    </script>
</body>
</html>
