<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Cairo:wght@900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Cairo', sans-serif; 
            background: linear-gradient(135deg, #d1fae5 0%, #fef3c7 50%, #d1fae5 100%); 
            min-height: 100vh; 
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header { background: linear-gradient(to right, #059669, #047857); color: white; padding: 20px; text-align: center; }
        .header h1 { font-size: 28px; font-weight: 900; }

        .toolbar { background: white; border-bottom: 4px solid #10b981; padding: 12px; }
        .toolbar-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; max-width: 800px; margin: 0 auto; }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ‡Ø±Ø³ - Ø¶Ø®Ù…Ø© Ø¬Ø¯Ø§Ù‹ */
        .btn { 
            display: flex; align-items: center; justify-content: center; 
            padding: 20px 5px; border: none; border-radius: 12px; 
            font-size: 24px; /* Ø®Ø· Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ */
            font-weight: 900; color: white; cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            width: 100%;
        }
        .btn-search { background: #3B82F6; }
        .btn-fihris { background: #F59E0B; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 15px; }

        /* ÙƒØ§Ø±Øª Ø§Ù„Ø¢ÙŠØ© */
        .verse-card { background: #d1fae5; border: 4px solid #10b981; border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .verse-text { 
            font-family: 'Amiri Quran', serif; 
            font-size: 32px; font-weight: 900; line-height: 1.6; 
            text-align: center; color: #1f2937; 
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ© - ØªÙ…Ù„Ø£ Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        .nav-buttons { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .nav-btn { 
            display: flex; align-items: center; justify-content: center; 
            padding: 25px 5px; border: none; border-radius: 12px; 
            font-size: 26px; /* Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ */
            font-weight: 900; color: white; cursor: pointer;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .btn-prev, .btn-next { flex: 1; }
        .btn-share { background: #EC4899; flex: 2.2; font-size: 28px; } /* Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù‡ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø± */
        .btn-prev { background: #FF6B35; }
        .btn-next { background: #8B5CF6; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡ - Ù…Ù„Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        .dedication { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            border: 4px solid #fbbf24; border-radius: 15px; 
            padding: 25px 15px; text-align: center; margin-bottom: 20px;
        }
        .dedication-text { 
            font-size: 24px; /* ÙƒØ¨Ø±Øª Ø¬Ø¯Ø§Ù‹ Ù„ØªÙ…Ù„Ø£ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
            font-weight: 900; color: white; 
            line-height: 1.3; margin-bottom: 10px;
            display: block; width: 100%;
        }
        .dedication-sub { font-size: 22px; font-weight: 900; color: #fef3c7; display: block; }

        /* Ø§Ù„ÙÙˆØªØ± - Ø§Ø³Ù… Ø£/ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ - Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ */
        .footer { 
            background: linear-gradient(135deg, #10b981 0%, #047857 100%); 
            border: 3px solid #10b981; border-radius: 15px; padding: 25px; text-align: center;
        }
        .footer-name { 
            font-size: 28px; /* Ø§Ø³Ù…Ùƒ Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ ÙˆÙˆØ§Ø¶Ø­ */
            font-weight: 900; color: white; 
            text-shadow: 2px 2px 5px rgba(0,0,0,0.4); margin-bottom: 8px;
            display: block; width: 100%;
        }
        .footer-copyright { font-size: 16px; font-weight: 900; color: #d1fae5; display: block; }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª (Ø§Ù„ÙÙ‡Ø±Ø³ ÙˆØ§Ù„Ø¨Ø­Ø«) */
        .sura-item { background:#fef3c7; border:3px solid #f59e0b; padding:15px; text-align:center; border-radius:10px; font-size: 22px; font-weight: 900; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©</h1>
    </div>

    <div class="toolbar">
        <div class="toolbar-buttons">
            <button class="btn btn-search" onclick="toggleSearch()">ğŸ” Ø¨Ù€Ø­Ù€Ø«</button>
            <button class="btn btn-fihris" onclick="toggleFihris()">ğŸ“‹ ÙÙ€Ù‡Ù€Ø±Ø³</button>
        </div>
    </div>

    <div class="container">
        <div id="loadingDiv" style="text-align:center; padding:50px; font-size:24px; font-weight:900;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        
        <div id="mainContent" style="display:none;">
            <div class="verse-card">
                <div style="text-align:center; font-weight:900; color:#047857; margin-bottom:15px; font-size:22px;" id="suraNameDisplay"></div>
                <div style="background:white; padding:20px; border-radius:10px; border:2px solid #10b981;">
                    <p class="verse-text" id="verseText"></p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn btn-prev" id="prevBtn" onclick="goPrevious()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="nav-btn btn-share" onclick="shareVerse()">Ù…Ù€Ø´Ù€Ø§Ø±ÙƒÙ€Ø©</button>
                <button class="nav-btn btn-next" id="nextBtn" onclick="goNext()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>

            <div class="dedication">
                <span class="dedication-text">Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù†ÙŠ ÙˆØ¹Ù† ÙˆØ§Ù„Ø¯ÙŠÙ‘ ÙˆØ²ÙˆØ¬ØªÙŠ ÙˆØ£ÙˆÙ„Ø§Ø¯ÙŠ</span>
                <span class="dedication-sub">Ø§Ù„Ù„Ù‡Ù… ØªÙ‚Ø¨Ù„ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ…</span>
            </div>

            <div class="footer">
                <span class="footer-name">ØªØµÙ…ÙŠÙ… ÙˆØªÙ†ÙÙŠØ° Ø£ / Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ</span>
                <span class="footer-copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</span>
            </div>
        </div>
    </div>

    <div id="searchModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; padding:20px;">
        <div style="background:white; border-radius:15px; padding:20px; max-width:500px; margin:auto;">
            <button onclick="closeSearch()" style="width:100%; background:#ef4444; color:white; padding:15px; border-radius:10px; font-weight:900; font-size:20px; margin-bottom:10px;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø« âœ•</button>
            <input type="text" id="searchInput" placeholder="Ø§ÙƒØªØ¨ Ù„Ù„Ø¨Ø­Ø«..." oninput="handleSearch()" style="width:100%; padding:15px; font-size:20px; border:3px solid #10b981; border-radius:10px;">
            <div id="searchResults" style="margin-top:15px; max-height:300px; overflow-y:auto;"></div>
        </div>
    </div>

    <div id="fihrisModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; padding:20px;">
        <div style="background:white; border-radius:15px; padding:20px; max-width:500px; margin:auto; max-height:90vh; overflow-y:auto;">
            <button onclick="closeFihris()" style="width:100%; background:#ef4444; color:white; padding:15px; border-radius:10px; font-weight:900; font-size:20px; margin-bottom:10px;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙÙ‡Ø±Ø³ âœ•</button>
            <div id="suraList" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
        </div>
    </div>

    <script>
        let allVerses = [];
        let currentIndex = 0;

        async function loadData() {
            try {
                const response = await fetch('quran.json');
                const suras = await response.json();
                suras.forEach(sura => {
                    sura.verses.forEach(verse => {
                        allVerses.push({ text: verse.text, suraName: sura.name, verseId: verse.id, suraId: sura.id });
                    });
                });
                
                const sList = document.getElementById('suraList');
                suras.forEach(s => {
                    const div = document.createElement('div');
                    div.className = 'sura-item';
                    div.innerText = s.name;
                    div.onclick = () => { currentIndex = allVerses.findIndex(v => v.suraId === s.id); updateDisplay(); closeFihris(); };
                    sList.appendChild(div);
                });

                currentIndex = parseInt(localStorage.getItem('lastReadIndex') || '0');
                document.getElementById('loadingDiv').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                updateDisplay();
            } catch (e) { document.getElementById('loadingDiv').innerText = "ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù quran.json"; }
        }

        function updateDisplay() {
            const v = allVerses[currentIndex];
            document.getElementById('verseText').innerText = v.text;
            document.getElementById('suraNameDisplay').innerText = v.suraName + " (Ø¢ÙŠØ© " + v.verseId + ")";
            localStorage.setItem('lastReadIndex', currentIndex);
            window.scrollTo(0,0);
        }

        function goNext() { if(currentIndex < allVerses.length-1) { currentIndex++; updateDisplay(); } }
        function goPrevious() { if(currentIndex > 0) { currentIndex--; updateDisplay(); } }

        function shareVerse() {
            const v = allVerses[currentIndex];
            const t = `{ ${v.text} }\n[${v.suraName} - Ø¢ÙŠØ© ${v.verseId}]\nØªØ·Ø¨ÙŠÙ‚: Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©`;
            if(navigator.share) navigator.share({text: t}); else { navigator.clipboard.writeText(t); alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ!"); }
        }

        function toggleSearch() { document.getElementById('searchModal').style.display = 'block'; }
        function closeSearch() { document.getElementById('searchModal').style.display = 'none'; }
        function toggleFihris() { document.getElementById('fihrisModal').style.display = 'block'; }
        function closeFihris() { document.getElementById('fihrisModal').style.display = 'none'; }

        function handleSearch() {
            const q = document.getElementById('searchInput').value;
            const res = document.getElementById('searchResults');
            if(!q) { res.innerHTML = ""; return; }
            const found = allVerses.filter(v => v.text.includes(q)).slice(0, 20);
            res.innerHTML = found.map(f => `<div onclick="currentIndex=${allVerses.indexOf(f)}; updateDisplay(); closeSearch();" style="border-bottom:2px solid #eee; padding:15px; cursor:pointer; font-size:18px; font-weight:900;"><b>${f.suraName}:</b> ${f.text.substring(0,40)}...</div>`).join('');
        }
        loadData();
    </script>
</body>
</html>
