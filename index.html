<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Cairo', sans-serif; 
            background: linear-gradient(135deg, #d1fae5 0%, #fef3c7 50%, #d1fae5 100%); 
            min-height: 100vh; 
        }
        
        .header { 
            background: linear-gradient(to right, #059669, #047857); 
            color: white; 
            padding: 15px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.15); 
            text-align: center;
            position: sticky; top: 0; z-index: 100;
        }
        .header-title h1 { font-size: 24px; font-weight: 900; } /* ØªÙƒØ¨ÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */

        .toolbar { 
            background: white; border-bottom: 3px solid #10b981; 
            padding: 10px; position: sticky; top: 78px; z-index: 99;
        }
        .toolbar-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; max-width: 800px; margin: 0 auto; }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ‡Ø±Ø³ - Ø®Ø· Ø¶Ø®Ù… ÙŠÙ…Ù„Ø£ Ø§Ù„Ø²Ø± */
        .btn { 
            display: flex; align-items: center; justify-content: center; gap: 10px; 
            padding: 15px 5px; border: none; border-radius: 10px; 
            font-size: 20px; /* Ø®Ø· Ø¶Ø®Ù… */
            font-weight: 900; /* Ø£Ù‚ØµÙ‰ Ø¯Ø±Ø¬Ø© Ø¹Ø±ÙŠØ¶Ø© Ù„Ù„Ø®Ø· */
            cursor: pointer; color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .btn-search { background: #3B82F6; }
        .btn-fihris { background: #F59E0B; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 12px; }

        /* Ø§Ù„ÙƒØ§Ø±Øª ÙˆØ§Ù„Ø¢ÙŠØ© */
        .verse-card { background: #d1fae5; border: 3px solid #10b981; border-radius: 12px; padding: 15px; margin-bottom: 15px; }
        .verse-text { 
            font-family: 'Amiri Quran', serif; 
            font-size: 26px; font-weight: bold; line-height: 1.8; 
            text-align: center; color: #1f2937; 
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ - Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù„ØªØ§Ù„ÙŠ */
        .nav-buttons { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .nav-btn { 
            display: flex; align-items: center; justify-content: center; 
            padding: 18px 5px; border: none; border-radius: 10px; 
            font-size: 22px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· Ø¬Ø¯Ø§Ù‹ */
            font-weight: 900; color: white; cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn-prev, .btn-next { flex: 1; }
        .btn-share { background: #EC4899; flex: 2.5; font-size: 24px; } /* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
        .btn-prev { background: #FF6B35; }
        .btn-next { background: #8B5CF6; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡ - Ù…Ù„Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø±ÙŠØ¶ */
        .dedication { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            border: 3px solid #fbbf24; border-radius: 12px; 
            padding: 20px 10px; text-align: center; margin-bottom: 15px;
        }
        .dedication-text { 
            font-size: 20px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· */
            font-weight: 900; color: white; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); 
            line-height: 1.4; margin-bottom: 8px;
        }
        .dedication-sub { font-size: 18px; font-weight: 800; color: #fef3c7; }

        /* Ø§Ù„ÙÙˆØªØ± - Ø§Ø³Ù… Ø£/ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ */
        .footer { 
            background: linear-gradient(135deg, #10b981 0%, #047857 100%); 
            border: 2px solid #10b981; border-radius: 12px; padding: 15px; text-align: center;
        }
        .footer-name { 
            font-size: 22px; /* ØªÙƒØ¨ÙŠØ± Ø§Ø³Ù…Ùƒ Ù„ÙŠÙƒÙˆÙ† Ø¨Ø§Ø±Ø²Ø§Ù‹ */
            font-weight: 900; color: white; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin-bottom: 5px;
        }
        .footer-copyright { font-size: 14px; font-weight: bold; color: #d1fae5; }

        /* ØªØ¹Ø¯ÙŠÙ„ Ø´ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ (Ø§Ù„ÙÙ‡Ø±Ø³ ÙˆØ§Ù„Ø¨Ø­Ø«) Ù„Ø®Ø·ÙˆØ· Ø£ÙˆØ¶Ø­ */
        .sura-name { font-size: 18px; font-weight: 900; color: #1f2937; }
        .search-input { font-size: 18px; font-weight: bold; padding: 15px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-title">
            <span style="font-size: 28px;">ğŸ“–</span>
            <h1>Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©</h1>
        </div>
    </div>

    <div class="toolbar">
        <div class="toolbar-buttons">
            <button class="btn btn-search" onclick="toggleSearch()">ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù†</button>
            <button class="btn btn-fihris" onclick="toggleFihris()">ğŸ“‹ ÙÙ‡Ø±Ø³ Ø§Ù„Ø³ÙˆØ±</button>
        </div>
    </div>

    <div id="searchModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1000; padding:20px;">
        <div style="background:white; border-radius:15px; padding:20px; max-width:500px; margin:50px auto; max-height:80vh; overflow-y:auto;">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                <h2 style="font-size:20px;">Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª</h2>
                <button onclick="closeSearch()" style="background:#ef4444; color:white; border:none; padding:5px 15px; border-radius:8px; font-weight:bold;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
            <input type="text" class="search-input" id="searchInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø© Ù‡Ù†Ø§..." oninput="handleSearch()" style="width:100%; border:2px solid #10b981; border-radius:8px;">
            <div id="searchResults" style="margin-top:15px;"></div>
        </div>
    </div>

    <div id="fihrisModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1000; padding:20px;">
        <div style="background:white; border-radius:15px; padding:20px; max-width:500px; margin:50px auto; max-height:80vh; overflow-y:auto;">
             <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                <h2 style="font-size:20px;">ÙÙ‡Ø±Ø³ Ø§Ù„Ø³ÙˆØ±</h2>
                <button onclick="closeFihris()" style="background:#ef4444; color:white; border:none; padding:5px 15px; border-radius:8px; font-weight:bold;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
            <div id="suraList" class="sura-grid" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
        </div>
    </div>

    <div class="container">
        <div id="loadingDiv" style="text-align:center; padding:50px; font-weight:bold;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù†...</div>
        
        <div id="mainContent" style="display:none;">
            <div class="verse-card">
                <div style="text-align:center; font-weight:900; color:#047857; margin-bottom:10px; font-size:18px;" id="suraNameDisplay"></div>
                <div style="background:white; padding:15px; border-radius:8px; border:1px solid #ddd;">
                    <p class="verse-text" id="verseText"></p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn btn-prev" id="prevBtn" onclick="goPrevious()">â—„ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="nav-btn btn-share" onclick="shareVerse()">â†— Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¢ÙŠØ©</button>
                <button class="nav-btn btn-next" id="nextBtn" onclick="goNext()">Ø§Ù„ØªØ§Ù„ÙŠ â–º</button>
            </div>

            <div class="dedication">
                <p class="dedication-text">Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù†ÙŠ ÙˆØ¹Ù† ÙˆØ§Ù„Ø¯ÙŠÙ‘ ÙˆØ²ÙˆØ¬ØªÙŠ ÙˆØ£ÙˆÙ„Ø§Ø¯ÙŠ</p>
                <p class="dedication-sub">Ø§Ù„Ù„Ù‡Ù… ØªÙ‚Ø¨Ù„ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
            </div>

            <div class="footer">
                <p class="footer-name">ØªØµÙ…ÙŠÙ… ÙˆØªÙ†ÙÙŠØ° Ø£ / Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ</p>
                <p class="footer-copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</p>
            </div>
        </div>
    </div>

    <script>
        let allVerses = [];
        let currentIndex = 0;

        async function loadData() {
            try {
                const response = await fetch('quran.json');
                const suras = await response.json();
                suras.forEach(sura => {
                    sura.verses.forEach(verse => {
                        allVerses.push({ text: verse.text, suraName: sura.name, verseId: verse.id, suraId: sura.id });
                    });
                });
                
                // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ÙÙ‡Ø±Ø³
                const sList = document.getElementById('suraList');
                suras.forEach(s => {
                    const div = document.createElement('div');
                    div.className = 'sura-item';
                    div.style = "background:#fef3c7; border:2px solid #f59e0b; padding:10px; text-align:center; border-radius:8px; cursor:pointer; font-weight:900;";
                    div.innerText = s.name;
                    div.onclick = () => {
                        currentIndex = allVerses.findIndex(v => v.suraId === s.id);
                        updateDisplay();
                        closeFihris();
                    };
                    sList.appendChild(div);
                });

                currentIndex = parseInt(localStorage.getItem('lastReadIndex') || '0');
                document.getElementById('loadingDiv').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                updateDisplay();
            } catch (e) { document.getElementById('loadingDiv').innerText = "Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"; }
        }

        function updateDisplay() {
            const v = allVerses[currentIndex];
            document.getElementById('verseText').innerText = v.text;
            document.getElementById('suraNameDisplay').innerText = v.suraName + " (Ø¢ÙŠØ© " + v.verseId + ")";
            localStorage.setItem('lastReadIndex', currentIndex);
        }

        function goNext() { if(currentIndex < allVerses.length-1) { currentIndex++; updateDisplay(); } }
        function goPrevious() { if(currentIndex > 0) { currentIndex--; updateDisplay(); } }

        function shareVerse() {
            const v = allVerses[currentIndex];
            const t = `{ ${v.text} }\n[${v.suraName} - Ø¢ÙŠØ© ${v.verseId}]\nØªØ·Ø¨ÙŠÙ‚: Ø¨Ù„ØºÙˆØ§ Ø¹Ù†ÙŠ ÙˆÙ„Ùˆ Ø¢ÙŠØ©`;
            if(navigator.share) navigator.share({text: t}); else alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ:\n" + t);
        }

        function toggleSearch() { document.getElementById('searchModal').style.display = 'block'; }
        function closeSearch() { document.getElementById('searchModal').style.display = 'none'; }
        function toggleFihris() { document.getElementById('fihrisModal').style.display = 'block'; }
        function closeFihris() { document.getElementById('fihrisModal').style.display = 'none'; }

        function handleSearch() {
            const q = document.getElementById('searchInput').value;
            const res = document.getElementById('searchResults');
            if(!q) { res.innerHTML = ""; return; }
            const found = allVerses.filter(v => v.text.includes(q)).slice(0, 20);
            res.innerHTML = found.map(f => `<div onclick="currentIndex=${allVerses.indexOf(f)}; updateDisplay(); closeSearch();" style="border-bottom:1px solid #eee; padding:10px; cursor:pointer;"><b>${f.suraName}:</b> ${f.text.substring(0,50)}...</div>`).join('');
        }

        loadData();
    </script>
</body>
</html>
